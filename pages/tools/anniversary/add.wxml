<view class="container">
  <!-- 顶部标题栏 -->
  <view class="header">
    <view class="header-left">
      <view class="back-btn" bindtap="goBack">
        <t-icon name="chevron-left" size="48rpx" color="#1a3a47" />
      </view>
      <text class="header-title">{{isEdit ? '编辑纪念日' : '添加纪念日'}}</text>
    </view>
  </view>

  <!-- 名称输入 -->
  <view class="form-card">
    <view class="form-item">
      <view class="form-label">
        <t-icon name="edit" size="36rpx" color="#1a5d6a" />
        <text>名称</text>
      </view>
      <input 
        class="form-input"
        placeholder="请输入纪念日名称"
        value="{{formData.name}}"
        bindinput="onNameChange"
        maxlength="20"
      />
    </view>
    <view class="error-tip" wx:if="{{nameError}}">请输入纪念日名称</view>
  </view>

  <!-- 日期选择 -->
  <view class="form-card">
    <picker
      mode="date"
      value="{{formData.date}}"
      start="{{minDate}}"
      bindchange="onDateChange"
    >
      <view class="form-item clickable">
        <view class="form-label">
          <t-icon name="calendar" size="36rpx" color="#1a5d6a" />
          <text>日期</text>
        </view>
        <view class="form-value">
          <text class="{{formData.date ? '' : 'placeholder'}}">{{formData.date || '请选择日期'}}
          </text>
          <t-icon name="chevron-right" size="36rpx" color="#b8c9d0" />
        </view>
      </view>
    </picker>
  </view>

  <!-- 类型选择 -->
  <view class="form-card">
    <view class="section-title">
      <t-icon name="view-module" size="36rpx" color="#1a5d6a" />
      <text>选择类型</text>
    </view>
    <view class="type-grid">
      <view 
        wx:for="{{typeList}}" 
        wx:key="value"
        class="type-item {{formData.type === item.value ? 'active' : ''}}"
        data-value="{{item.value}}"
        bindtap="onTypeSelect"
      >
        <view class="type-icon {{item.value}}">
          <t-icon name="{{item.icon}}" size="44rpx" color="{{item.color}}" />
        </view>
        <text class="type-name">{{item.label}}</text>
        <view class="type-check" wx:if="{{formData.type === item.value}}">
          <t-icon name="check" size="24rpx" color="#fff" />
        </view>
      </view>
    </view>
  </view>

  <!-- 提醒设置 -->
  <view class="form-card">
    <view class="section-title">
      <t-icon name="notification" size="36rpx" color="#1a5d6a" />
      <text>提醒设置</text>
    </view>
    <view class="remind-grid">
      <view 
        wx:for="{{remindOptions}}" 
        wx:key="value"
        class="remind-item {{remindSelected[item.value] ? 'active' : ''}}"
        data-value="{{item.value}}"
        bindtap="onRemindToggle"
      >
        <view class="remind-checkbox">
          <t-icon 
            wx:if="{{remindSelected[item.value]}}" 
            name="check" 
            size="24rpx" 
            color="#fff"
          />
        </view>
        <text>{{item.label}}</text>
      </view>
    </view>
    <view class="remind-tip">
      <t-icon name="info-circle" size="28rpx" color="#b8c9d0" />
      <text>选择希望收到提醒的时间</text>
    </view>
  </view>

  <!-- 备注 -->
  <view class="form-card">
    <view class="section-title">
      <t-icon name="file" size="36rpx" color="#1a5d6a" />
      <text>备注（可选）</text>
    </view>
    <textarea 
      class="note-input"
      placeholder="添加一些备注信息..."
      value="{{formData.note}}"
      bindinput="onNoteChange"
      maxlength="100"
      auto-height
    />
  </view>

  <!-- 保存按钮 -->
  <view class="button-area">
    <view class="save-btn {{saving ? 'disabled' : ''}}" bindtap="onSave">
      <t-icon name="{{isEdit ? 'check' : 'add'}}" size="40rpx" color="#fff" wx:if="{{!saving}}" />
      <t-loading theme="circular" size="40rpx" wx:if="{{saving}}" />
      <text>{{isEdit ? '保存修改' : '添加纪念日'}}</text>
    </view>
  </view>
</view>

