<view class="container">
  <!-- 生成二维码 -->
  <view class="content-section">
    <view class="form-section">
      <view class="section-title">输入内容</view>
      <t-input
        placeholder="请输入文本、网址或联系方式"
        value="{{inputText}}"
        bindchange="onInputChange"
        maxlength="500"
        type="text"
        clearable
      />
      <view class="input-hint">支持文本、网址、联系方式等内容</view>
    </view>

    <!-- 加载状态 -->
    <view class="loading-section" wx:if="{{generating}}">
      <t-icon name="loading" size="60rpx" color="#0052d9" />
      <text class="loading-text">生成中...</text>
    </view>

    <!-- 二维码预览 -->
    <view class="qrcode-section" wx:if="{{qrcodePath && !generating}}">
      <view class="qrcode-preview">
        <image class="qrcode-image" src="{{qrcodePath}}" mode="aspectFit" bindtap="previewQRCode" />
        <view class="qrcode-hint">点击可预览大图</view>
      </view>
      
      <view class="qrcode-actions">
        <t-button theme="primary" size="large" block bindtap="saveQRCode">
          保存到相册
        </t-button>
      </view>
    </view>

    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{!qrcodePath && !generating}}">
      <t-icon name="qrcode" size="120rpx" color="#ccc" />
      <text class="empty-text">输入内容后自动生成二维码</text>
    </view>

    <!-- 隐藏的 Canvas -->
    <canvas 
      type="2d" 
      id="qrcode-canvas" 
      style="position: fixed; left: -9999px; width: 1px; height: 1px;"
    ></canvas>
  </view>

  <!-- 使用说明 -->
  <view class="tips-section">
    <view class="tips-title">使用说明</view>
    <view class="tips-content">
      <view class="tips-item">
        • 输入文本、网址、联系方式等内容即可生成二维码
      </view>
      <view class="tips-item">
        • 生成的二维码可保存到相册或分享给他人
      </view>
      <view class="tips-item">
        • 二维码会自动根据输入内容实时生成
      </view>
    </view>
  </view>
</view>
